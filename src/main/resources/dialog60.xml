<!DOCTYPE grammar PUBLIC "-//W3C//DTD GRAMMAR 1.0//EN" "http://www.w3.org/TR/speech-grammar/grammar.dtd">

<grammar xmlns="http://www.w3.org/2001/06/grammar" xml:lang="en"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://www.w3.org/2001/06/grammar
 http://www.w3.org/TR/speech-grammar/grammar.xsd"
         version="1.0" mode="voice" root="root_rule" tag-format="semantics/1.0">

    <rule id="root_rule" scope="public">
        <one-of>
            <item>
                <ruleref uri="#pick_up"/>
                <tag> out=rules.pick_up; </tag>
            </item>
            <item>
                <ruleref uri="#specify"/>
                <tag> out=rules.specify; </tag>
            </item>
            <item>
                <ruleref uri="#answer"/>
                <tag> out=rules.answer; </tag>
            </item>
        </one-of>
    </rule>

    <rule id="pick_up">
        <example> Please pick up the green box</example>
        <item repeat="0-1">please</item>
        <tag>
            out.intent="pick_up";
        </tag>
        <one-of>
            <item repeat="0-1">pick up</item>
            <item repeat="0-1">take</item>
        </one-of>
        <item repeat="0-1">  <ruleref uri="#entities"/> <tag> out.slots = rules.entities</tag> </item>
    </rule>


    <rule id="specify">
        <tag> out.intent = "specify"; </tag>
        <one-of>
            <item> box1 <tag> out.specification = "box1" </tag></item>
            <item> box2 <tag> out.specification = "box2" </tag></item>
            <item> box3 <tag> out.specification = "box3" </tag></item>
        </one-of>
    </rule>

    <rule id="answer">
        <tag> out.intent = "answer"; </tag>
        <one-of>
            <item> yes <tag> out.content = "confirm" </tag></item>
            <item> no <tag> out.content = "disconfirm" </tag></item>
        </one-of>
    </rule>



    <rule id="entities">
        <example> the small workbench </example>
        <example> the large green box  </example>
        <example> my large red box  </example>
        <tag> out.slot_type = "entity"; </tag>
        <item> the</item>
        <item repeat="0-1"> <ruleref uri="#color"/> <tag> out.attributes = rules.color</tag> </item>
        <item>  <ruleref uri="#objecttypes"/> <tag> out.entity_type = rules.objecttypes</tag> </item>
    </rule>


    <rule id="objecttypes">
        <example>workbench </example>
        <example> box  </example>
        <one-of>
            <item> workbench <tag> out = "workbench"; </tag> </item>
            <item> box <tag> out = "box"; </tag> </item>
        </one-of>
    </rule>


    <rule id="color">
        <example> red </example>
        <example> green  </example>
        <example> yellow  </example>
        <example> blue  </example>
        <tag> out.attribute_type = "colors"; </tag>
        <one-of>
            <item> red <tag> out.attribute_value = "red"; </tag> </item>
            <item> green <tag> out.attribute_value = "green"; </tag> </item>
            <item> yellow <tag> out.attribute_value = "yellow"; </tag> </item>
            <item> blue <tag> out.attribute_value = "blue"; </tag> </item>
        </one-of>
    </rule>


</grammar>